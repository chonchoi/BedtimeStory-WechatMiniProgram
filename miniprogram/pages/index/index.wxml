<!--index.wxml-->
<view class="container">
  <view class="section">
    <view class="section-title">选择主角小动物</view>
    <view class="selection-grid">
      <view 
        wx:for="{{animals}}" 
        wx:key="id"
        class="selection-item {{selectedAnimal === item.id ? 'selected' : ''}}"
        bindtap="selectAnimal"
        data-id="{{item.id}}"
      >
        <text class="emoji">{{item.emoji}}</text>
        <text>{{item.name}}</text>
      </view>
    </view>
  </view>

  <view class="section">
    <view class="section-title">选择故事发生的地点</view>
    <view class="selection-grid">
      <view 
        wx:for="{{scenes}}" 
        wx:key="id"
        class="selection-item {{selectedScene === item.id ? 'selected' : ''}}"
        bindtap="selectScene"
        data-id="{{item.id}}"
      >
        <text class="emoji">{{item.emoji}}</text>
        <text>{{item.name}}</text>
      </view>
    </view>
  </view>

  <view class="section">
    <view class="section-title">选择故事的风格</view>
    <view class="selection-grid">
      <view 
        wx:for="{{styles}}" 
        wx:key="id"
        class="selection-item {{selectedStyle === item.id ? 'selected' : ''}}"
        bindtap="selectStyle"
        data-id="{{item.id}}"
      >
        <text class="emoji">{{item.emoji}}</text>
        <text>{{item.name}}</text>
      </view>
    </view>
  </view>

  <!-- 操作按钮 -->
  <view class="button-group">
    <button 
      class="generate-btn" 
      bindtap="generateStory"
      disabled="{{!selectedAnimal || !selectedScene || !selectedStyle}}"
    >生成故事</button>
  </view>

  <!-- 故事展示 -->
  <view class="story-container" wx:if="{{story}}">
    <view class="story-title">今天的睡前故事</view>
    <view class="story-content">{{story}}</view>
    <button 
      class="restart-btn" 
      bindtap="restart"
    >重新开始</button>
  </view>
</view>